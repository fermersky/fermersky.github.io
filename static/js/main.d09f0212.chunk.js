(this["webpackJsonpwebrtc-react"]=this["webpackJsonpwebrtc-react"]||[]).push([[0],{114:function(e,n){},118:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),a=t(47),u=t.n(a),i=(t(60),t(18)),l=t.n(i),o=t(48),s=t(21),m=t(49),f=t(19),b=t.n(f),p=t(50),v=t.n(p);function d(){var e=Object(m.a)(["\n  width: 400px;\n"]);return d=function(){return e},e}var g=t(51).a.video(d());var j=function(){var e=Object(r.useRef)(),n=Object(r.useRef)(!1),t=Object(r.useRef)(),a=Object(r.useRef)(),u=Object(r.useRef)(),i=Object(r.useRef)(),m=Object(r.useState)(),f=Object(s.a)(m,2),p=f[0],d=f[1],j=Object(r.useState)(),O=Object(s.a)(j,2),E=O[0],h=O[1];Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){t.current&&(t.current.srcObject=n,e.current=n)})),u.current=v()("https://tranquil-inlet-70924.herokuapp.com/"),u.current.emit("enter",prompt("What is your name, hero?")),u.current.on("allUsers",y),u.current.on("yourID",k),u.current.on("tryToCall",w)}),[]);var y=function(e){h(e)},k=function(e){d(e)},w=function(){var n=Object(o.a)(l.a.mark((function n(t){var r,c,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.from,c=t.signalFromCaller,(i=new b.a({initiator:!1,trickle:!1,stream:e.current,config:{iceServers:[{urls:"stun:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"},{urls:"turn:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"}]}})).on("signal",(function(e){u.current.emit("acceptCall",{to:r,signalFromPartner:e})})),i.on("stream",(function(e){a.current.srcObject=e,console.log("recived from caller"+e)})),i.signal(c);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return E&&(i.current=Object.keys(E).map((function(t){return t!==p&&c.a.createElement("li",{key:t},c.a.createElement("button",{onClick:function(){return function(t){var r=new b.a({initiator:!0,trickle:!1,config:{iceServers:[{urls:"stun:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"},{urls:"turn:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"}]},stream:e.current});r.on("signal",(function(e){n.current||u.current.emit("call",{from:p,to:t,signalFromCaller:e})})),r.on("stream",(function(e){a.current.srcObject=e,console.log("recived from partner"+e)})),u.current.on("callAccepted",(function(e){r.signal(e),n.current=!0}))}(t)}},"Call to ",E[t]))}))),c.a.createElement("div",{className:"App"},c.a.createElement("div",null,c.a.createElement(g,{playsInline:!0,ref:t,muted:!0,autoPlay:!0}),c.a.createElement(g,{playsInline:!0,ref:a,autoPlay:!0})),c.a.createElement("div",null,c.a.createElement("ul",null,i.current)))};u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root"))},55:function(e,n,t){e.exports=t(118)},60:function(e,n,t){},85:function(e,n){},87:function(e,n){}},[[55,1,2]]]);
//# sourceMappingURL=main.d09f0212.chunk.js.map