(this["webpackJsonpwebrtc-react"]=this["webpackJsonpwebrtc-react"]||[]).push([[0],{114:function(e,t){},118:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(47),u=n.n(a),o=(n(60),n(18)),i=n.n(o),l=n(48),s=n(21),f=n(49),m=n(19),p=n.n(m),b=n(50),v=n.n(b),d=n(51),O=[{url:"stun:stun.voipstunt.com"},{url:"stun:stun.voxgratia.org"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"},{url:"turn:192.158.29.39:3478?transport=udp",credential:"JZEOEt2V3Qb0y27GRntt2u2PAYA=",username:"28224511:1379330808"}];function g(){var e=Object(f.a)(["\n  width: 400px;\n"]);return g=function(){return e},e}var j=d.a.video(g());var E=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(!1),n=Object(r.useRef)(),a=Object(r.useRef)(),u=Object(r.useRef)(),o=Object(r.useRef)(),f=Object(r.useState)(),m=Object(s.a)(f,2),b=m[0],d=m[1],g=Object(r.useState)(),E=Object(s.a)(g,2),h=E[0],y=E[1];Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){n.current&&(n.current.srcObject=t,e.current=t)})),u.current=v()("https://tranquil-inlet-70924.herokuapp.com/"),u.current.emit("enter",prompt("What is your name, hero?")),u.current.on("allUsers",k),u.current.on("yourID",w),u.current.on("tryToCall",R)}),[]);var k=function(e){y(e)},w=function(e){d(e)},R=function(){var t=Object(l.a)(i.a.mark((function t(n){var r,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),r=n.from,c=n.signalFromCaller,(o=new p.a({initiator:!1,trickle:!0,stream:e.current,config:{iceServers:O}})).on("signal",(function(e){u.current.emit("acceptCall",{to:r,signalFromPartner:e})})),o.on("stream",(function(e){a.current.srcObject=e})),o.signal(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return h&&(o.current=Object.keys(h).map((function(n){return n!==b&&c.a.createElement("li",{key:n},c.a.createElement("button",{onClick:function(){return function(n){console.log(e.current);var r=new p.a({initiator:!0,trickle:!0,config:{iceServers:O},stream:e.current});r.on("signal",(function(e){t.current||u.current.emit("call",{from:b,to:n,signalFromCaller:e})})),r.on("stream",(function(e){a.current.srcObject=e})),u.current.on("callAccepted",(function(e){r.signal(e),t.current=!0}))}(n)}},"Call to ",h[n]))}))),c.a.createElement("div",{className:"App"},c.a.createElement("div",null,c.a.createElement(j,{playsInline:!0,ref:n,muted:!0,autoPlay:!0}),c.a.createElement(j,{playsInline:!0,ref:a,autoPlay:!0})),c.a.createElement("div",null,c.a.createElement("ul",null,o.current)))};u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(E,null)),document.getElementById("root"))},55:function(e,t,n){e.exports=n(118)},60:function(e,t,n){},85:function(e,t){},87:function(e,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.0a9466fb.chunk.js.map